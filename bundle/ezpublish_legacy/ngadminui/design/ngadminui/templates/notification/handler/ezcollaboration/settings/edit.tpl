{* DO NOT EDIT THIS FILE! Use an override template instead. *}
{let handlers=$handler.collaboration_handlers
     selection=$handler.collaboration_selections}

<div class="block">
    <fieldset>
        <legend>{"Collaboration notification"|i18n("design/admin/notification/collaboration")}</legend>

        <p>{"Choose which collaboration items you want to get notifications for."|i18n("design/admin/notification/collaboration")}</p>

        <input type="hidden" name="CollaborationHandlerSelection" value="1" />

        {section name=Handlers loop=$handlers}
            {let types=$:item.notification_types}
                {section show=or($:types,$:types|gt(0))}
                    {section show=is_array($:types)}
                        <h3>{$:item.info.type-name|wash}</h3>
                        {section name=Types loop=$:types}
                            <div class="checkbox">
                                <label><input type="checkbox" name="CollaborationHandlerSelection_{$handler.id_string}[]"
                                                                 value="{$Handlers:item.info.type-identifier}_{$:item.value}"
                                                                 {if $selection|contains(concat($Handlers:item.info.type-identifier,'_',$:item.value))}checked="checked"{/if} />
                                {$:item.name|wash}</label>
                            </div>
                        {/section}
                    {section-else}
                        <div class="checkbox">
                            <label><input type="checkbox" name="CollaborationHandlerSelection_{$handler.id_string}[]"
                                                     value="{$Handlers:item.info.type-identifier}"
                                                     {if $selection|contains($Handlers:item.info.type-identifier)}checked="checked"{/if} />
                            {$:item.info.type-name|wash}</label>
                        </div>
                    {/section}
                {section-else}

                {/section}
            {/let}
        {/section}
    </fieldset>
</div>
{/let}
